# ğŸ¯ æŒ‡å®šç”¨æˆ·çˆ¬å–åŠŸèƒ½è¯´æ˜

## åŠŸèƒ½ç®€ä»‹

ç°åœ¨æ”¯æŒ**çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å…¬å¼€å†…å®¹**ï¼Œä¸ä»…é™äºçˆ¬å–ç™»å½•ç”¨æˆ·è‡ªå·±çš„å†…å®¹ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **çˆ¬å–è‡ªå·±çš„å†…å®¹**ï¼ˆåŸæœ‰åŠŸèƒ½ï¼‰
- âœ… **çˆ¬å–å…¶ä»–ç”¨æˆ·çš„å…¬å¼€å†…å®¹**ï¼ˆæ–°åŠŸèƒ½ï¼‰
- âœ… **éœ€è¦ç™»å½•**ï¼šä½¿ç”¨è‡ªå·±çš„è´¦å·ç™»å½•ï¼Œé¿å…è®¿é—®é™åˆ¶
- âœ… **æ”¯æŒæ‰€æœ‰å†…å®¹ç±»å‹**ï¼šæ–‡ç« ã€å›ç­”ã€æƒ³æ³•

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ä¾¿æ·è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
cd /Users/zhuaoyuan/cursor-workspace/knowledge-base/scripts/zhihu_spider_selenium

# 1. çˆ¬å–è‡ªå·±çš„å†…å®¹ï¼ˆä¸æŒ‡å®šç”¨æˆ·åï¼‰
./run.sh article        # çˆ¬å–è‡ªå·±çš„æ–‡ç« 
./run.sh answer         # çˆ¬å–è‡ªå·±çš„å›ç­”
./run.sh think          # çˆ¬å–è‡ªå·±çš„æƒ³æ³•
./run.sh all            # çˆ¬å–è‡ªå·±çš„æ‰€æœ‰å†…å®¹

# 2. çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å†…å®¹ï¼ˆæŒ‡å®šç”¨æˆ·åï¼‰
./run.sh article zhang-san      # çˆ¬å– zhang-san çš„æ–‡ç« 
./run.sh answer li-si           # çˆ¬å– li-si çš„å›ç­”
./run.sh think wang-wu          # çˆ¬å– wang-wu çš„æƒ³æ³•
./run.sh all zhao-liu           # çˆ¬å– zhao-liu çš„æ‰€æœ‰å†…å®¹
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ Python å‘½ä»¤

```bash
cd /Users/zhuaoyuan/cursor-workspace/knowledge-base/scripts/zhihu_spider_selenium
source venv/bin/activate

# çˆ¬å–è‡ªå·±çš„å†…å®¹
python crawler.py --article --MarkDown --links_scratch

# çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å†…å®¹
python crawler.py --article --MarkDown --links_scratch --target_user zhang-san

# æŸ¥çœ‹æ‰€æœ‰å‚æ•°
python crawler.py --help
```

## å¦‚ä½•è·å–ç”¨æˆ·å

ç”¨æˆ·åæ˜¯çŸ¥ä¹ä¸ªäººä¸»é¡µ URL ä¸­çš„æ ‡è¯†éƒ¨åˆ†ã€‚

### æ­¥éª¤ï¼š

1. è®¿é—®ç›®æ ‡ç”¨æˆ·çš„çŸ¥ä¹ä¸»é¡µ
2. æŸ¥çœ‹æµè§ˆå™¨åœ°å€æ çš„ URL
3. æå– `/people/` åé¢çš„éƒ¨åˆ†

### ç¤ºä¾‹ï¼š

| çŸ¥ä¹ä¸»é¡µ URL | ç”¨æˆ·åï¼ˆæ ‡è¯†ï¼‰ |
|-------------|---------------|
| `https://www.zhihu.com/people/zhang-san` | `zhang-san` |
| `https://www.zhihu.com/people/li-si-123` | `li-si-123` |
| `https://www.zhihu.com/people/wang-wu-ab12cd` | `wang-wu-ab12cd` |

**æ³¨æ„**ï¼šç”¨æˆ·åå¯èƒ½åŒ…å«å­—æ¯ã€æ•°å­—ã€çŸ­æ¨ªçº¿ï¼ˆ-ï¼‰ï¼Œä½†ä¸åŒ…å«ç©ºæ ¼å’Œå…¶ä»–ç‰¹æ®Šå­—ç¬¦ã€‚

## å®Œæ•´ç¤ºä¾‹

### åœºæ™¯ 1ï¼šçˆ¬å–è‡ªå·±çš„æ‰€æœ‰å†…å®¹

```bash
# 1. ç¡®ä¿å·²ç™»å½•
./run.sh check

# 2. çˆ¬å–æ‰€æœ‰å†…å®¹
./run.sh all

# ç»“æœä¿å­˜åœ¨ï¼š
# - article/  - ä½ çš„æ–‡ç« 
# - answer/   - ä½ çš„å›ç­”
# - think/    - ä½ çš„æƒ³æ³•
```

### åœºæ™¯ 2ï¼šçˆ¬å–æŒ‡å®šç”¨æˆ·çš„æ–‡ç« 

```bash
# 1. æ‰¾åˆ°ç›®æ ‡ç”¨æˆ·çš„ç”¨æˆ·å
# è®¿é—®ï¼šhttps://www.zhihu.com/people/zhang-san
# ç”¨æˆ·åï¼šzhang-san

# 2. çˆ¬å–è¯¥ç”¨æˆ·çš„æ–‡ç« 
./run.sh article zhang-san

# ç»“æœä¿å­˜åœ¨ï¼š
# - article/  - zhang-san çš„æ–‡ç« 
```

### åœºæ™¯ 3ï¼šçˆ¬å–å¤šä¸ªç”¨æˆ·çš„å†…å®¹

```bash
# æ‰¹é‡çˆ¬å–å¤šä¸ªç”¨æˆ·çš„å›ç­”
./run.sh answer zhang-san
./run.sh answer li-si
./run.sh answer wang-wu

# ç»“æœéƒ½ä¿å­˜åœ¨ answer/ ç›®å½•ä¸‹
# æŒ‰æ—¶é—´å’Œæ ‡é¢˜è‡ªåŠ¨åˆ†ç±»å­˜å‚¨
```

### åœºæ™¯ 4ï¼šè‡ªå®šä¹‰å‚æ•°çˆ¬å–

```bash
source venv/bin/activate

# çˆ¬å–æŒ‡å®šç”¨æˆ·ï¼Œå¢åŠ ç¡çœ æ—¶é—´åˆ° 10 ç§’
python crawler.py --answer --MarkDown --links_scratch \
                  --target_user zhang-san \
                  --sleep_time 10

# åªçˆ¬å–å·²ä¿å­˜çš„é“¾æ¥ï¼ˆä¸é‡æ–°è·å–ï¼‰
python crawler.py --answer --MarkDown \
                  --target_user li-si
```

## å‚æ•°è¯´æ˜

### å‘½ä»¤è¡Œå‚æ•°

```bash
python crawler.py --help
```

ä¸»è¦å‚æ•°ï¼š

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `--target_user` | string | æŒ‡å®šè¦çˆ¬å–çš„ç”¨æˆ·åï¼Œä¸æŒ‡å®šåˆ™çˆ¬å–ç™»å½•ç”¨æˆ· |
| `--article` | flag | çˆ¬å–æ–‡ç«  |
| `--answer` | flag | çˆ¬å–å›ç­” |
| `--think` | flag | çˆ¬å–æƒ³æ³• |
| `--MarkDown` | flag | ä¿å­˜ä¸º Markdown æ ¼å¼ |
| `--links_scratch` | flag | é‡æ–°çˆ¬å–æ‰€æœ‰é“¾æ¥ |
| `--sleep_time` | float | çˆ¬å–é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 6 |

### ç»„åˆä½¿ç”¨

```bash
# çˆ¬å–æŒ‡å®šç”¨æˆ·çš„æ–‡ç« å’Œå›ç­”ï¼Œä¿å­˜ä¸º Markdown
python crawler.py --article --answer --MarkDown --links_scratch \
                  --target_user zhang-san

# çˆ¬å–æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰å†…å®¹
python crawler.py --think --article --answer --MarkDown --links_scratch \
                  --target_user li-si
```

## æ³¨æ„äº‹é¡¹

### 1. å¿…é¡»å…ˆç™»å½•

å³ä½¿çˆ¬å–å…¶ä»–ç”¨æˆ·çš„å†…å®¹ï¼Œä¹Ÿéœ€è¦å…ˆç”¨è‡ªå·±çš„è´¦å·ç™»å½•ï¼š

```bash
# é¦–æ¬¡ä½¿ç”¨ï¼Œå…ˆç™»å½•
./run.sh login
```

**åŸå› **ï¼š
- é¿å…è¢«çŸ¥ä¹è¯†åˆ«ä¸ºæœªç™»å½•è®¿é—®è€Œé™åˆ¶é¢‘ç‡
- æé«˜çˆ¬å–æˆåŠŸç‡å’Œç¨³å®šæ€§

### 2. åªèƒ½çˆ¬å–å…¬å¼€å†…å®¹

- âœ… å¯ä»¥çˆ¬å–ï¼šå…¬å¼€çš„æ–‡ç« ã€å›ç­”ã€æƒ³æ³•
- âŒ ä¸èƒ½çˆ¬å–ï¼šç§å¯†å†…å®¹ã€éœ€è¦å…³æ³¨æ‰èƒ½çœ‹çš„å†…å®¹

### 3. éµå®ˆçˆ¬å–é¢‘ç‡

- é»˜è®¤é—´éš”ï¼š6 ç§’
- å»ºè®®åœ¨æ·±å¤œè¿è¡Œï¼Œé¿å…é«˜å³°æœŸ
- é¿å…ç»™çŸ¥ä¹æœåŠ¡å™¨é€ æˆå‹åŠ›

### 4. å†…å®¹ä¿å­˜ä½ç½®

æ‰€æœ‰çˆ¬å–çš„å†…å®¹éƒ½ä¿å­˜åœ¨åŒä¸€ç›®å½•ç»“æ„ä¸‹ï¼š

```
zhihu_spider_selenium/
â”œâ”€â”€ article/          # æ‰€æœ‰æ–‡ç« ï¼ˆè‡ªå·±çš„ + æŒ‡å®šç”¨æˆ·çš„ï¼‰
â”œâ”€â”€ answer/           # æ‰€æœ‰å›ç­”
â”œâ”€â”€ think/            # æ‰€æœ‰æƒ³æ³•
â””â”€â”€ log/              # è¿è¡Œæ—¥å¿—
```

æ¯ä¸ªå†…å®¹ä¼šæŒ‰ç…§æ—¶é—´å’Œæ ‡é¢˜åˆ›å»ºç‹¬ç«‹çš„å­ç›®å½•ã€‚

### 5. ç”¨æˆ·åæ ¼å¼

- âœ… æ­£ç¡®ï¼š`zhang-san`, `li-si-123`, `wang-wu-ab12cd`
- âŒ é”™è¯¯ï¼š`å¼ ä¸‰`ï¼ˆä¸æ˜¯ç”¨æˆ·åï¼‰ï¼Œ`zhang san`ï¼ˆæœ‰ç©ºæ ¼ï¼‰

### 6. é‡å¤çˆ¬å–å¤„ç†

ç¨‹åºä¼šè‡ªåŠ¨è·³è¿‡å·²ç»çˆ¬å–è¿‡çš„å†…å®¹ï¼ˆåŸºäºæ–‡ä»¶ååˆ¤æ–­ï¼‰ã€‚

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•çŸ¥é“æŸä¸ªç”¨æˆ·çš„ç”¨æˆ·åï¼Ÿ

**æ–¹æ³• 1**ï¼šè®¿é—®è¯¥ç”¨æˆ·çš„çŸ¥ä¹ä¸»é¡µï¼ŒæŸ¥çœ‹ URL

```
https://www.zhihu.com/people/zhang-san
                              ^^^^^^^^^ è¿™å°±æ˜¯ç”¨æˆ·å
```

**æ–¹æ³• 2**ï¼šåœ¨çŸ¥ä¹æœç´¢è¯¥ç”¨æˆ·ï¼Œç‚¹å‡»è¿›å…¥ä¸»é¡µï¼ŒæŸ¥çœ‹ URL

### Q2: å¯ä»¥çˆ¬å–å“ªäº›ç”¨æˆ·çš„å†…å®¹ï¼Ÿ

æ‰€æœ‰æœ‰å…¬å¼€ä¸»é¡µçš„çŸ¥ä¹ç”¨æˆ·ï¼ŒåŒ…æ‹¬ï¼š
- çŸ¥ä¹å¤§ V
- è®¤è¯ç”¨æˆ·
- æ™®é€šç”¨æˆ·ï¼ˆå…¬å¼€ä¸»é¡µï¼‰

**ä¸èƒ½çˆ¬å–**ï¼š
- è®¾ç½®ä¸ºç§å¯†çš„å†…å®¹
- éœ€è¦å…³æ³¨æ‰èƒ½æŸ¥çœ‹çš„å†…å®¹
- è¢«åˆ é™¤çš„å†…å®¹

### Q3: çˆ¬å–æŒ‡å®šç”¨æˆ·æ—¶ï¼Œcookie æ˜¯è°çš„ï¼Ÿ

Cookie æ˜¯**ä½ è‡ªå·±**çš„ç™»å½• cookieï¼Œä½†çˆ¬å–çš„æ˜¯**æŒ‡å®šç”¨æˆ·**çš„å…¬å¼€å†…å®¹ã€‚

è¿™å°±åƒï¼šç”¨ä½ è‡ªå·±çš„è´¦å·ç™»å½•çŸ¥ä¹ï¼Œç„¶åè®¿é—®åˆ«äººçš„ä¸»é¡µæŸ¥çœ‹ä»–ä»¬çš„å…¬å¼€æ–‡ç« ã€‚

### Q4: çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å†…å®¹ä¼šè¢«å‘ç°å—ï¼Ÿ

ä¸ä¼šã€‚è¿™æ˜¯æ­£å¸¸çš„æµè§ˆè¡Œä¸ºï¼Œå°±åƒä½ ç”¨æµè§ˆå™¨è®¿é—®åˆ«äººçš„å…¬å¼€ä¸»é¡µä¸€æ ·ã€‚

### Q5: å¯ä»¥åŒæ—¶çˆ¬å–å¤šä¸ªç”¨æˆ·å—ï¼Ÿ

ä¸èƒ½åŒæ—¶çˆ¬å–ï¼Œä½†å¯ä»¥ä¾æ¬¡çˆ¬å–ï¼š

```bash
./run.sh article zhang-san
./run.sh article li-si
./run.sh article wang-wu
```

æˆ–è€…å†™ä¸€ä¸ªç®€å•çš„å¾ªç¯è„šæœ¬ï¼š

```bash
for user in zhang-san li-si wang-wu; do
    echo "çˆ¬å–ç”¨æˆ·: $user"
    ./run.sh article $user
    echo "ä¼‘æ¯ 30 ç§’..."
    sleep 30
done
```

### Q6: çˆ¬å–å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**å¯èƒ½åŸå› **ï¼š
1. ç”¨æˆ·åä¸æ­£ç¡®
2. è¯¥ç”¨æˆ·è®¾ç½®äº†éšç§ä¿æŠ¤
3. ç½‘ç»œé—®é¢˜
4. Cookie è¿‡æœŸ

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦æ­£ç¡®
# è®¿é—® https://www.zhihu.com/people/[ç”¨æˆ·å] çœ‹æ˜¯å¦èƒ½æ­£å¸¸è®¿é—®

# 2. æ£€æŸ¥ç™»å½•çŠ¶æ€
./run.sh check

# 3. å¦‚æœ cookie è¿‡æœŸï¼Œé‡æ–°ç™»å½•
rm cookie/cookie_zhihu.pkl
./run.sh login

# 4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
ls -lt log/
tail -100 log/[æœ€æ–°æ—¥å¿—æ–‡ä»¶]
```

## é«˜çº§ç”¨æ³•

### æ‰¹é‡çˆ¬å–å¤šä¸ªç”¨æˆ·

åˆ›å»ºç”¨æˆ·åˆ—è¡¨æ–‡ä»¶ `users.txt`ï¼š

```
zhang-san
li-si
wang-wu
zhao-liu
```

ç¼–å†™æ‰¹é‡è„šæœ¬ `batch_crawl.sh`ï¼š

```bash
#!/bin/bash

cd /Users/zhuaoyuan/cursor-workspace/knowledge-base/scripts/zhihu_spider_selenium

# è¯»å–ç”¨æˆ·åˆ—è¡¨
while IFS= read -r username; do
    echo "=========================================="
    echo "å¼€å§‹çˆ¬å–ç”¨æˆ·: $username"
    echo "=========================================="
    
    # çˆ¬å–è¯¥ç”¨æˆ·çš„æ‰€æœ‰å†…å®¹
    ./run.sh all "$username"
    
    echo "å®Œæˆçˆ¬å–: $username"
    echo "ä¼‘æ¯ 60 ç§’..."
    sleep 60
done < users.txt

echo "æ‰€æœ‰ç”¨æˆ·çˆ¬å–å®Œæˆï¼"
```

ä½¿ç”¨ï¼š

```bash
chmod +x batch_crawl.sh
./batch_crawl.sh
```

### å®šæ—¶çˆ¬å–æŒ‡å®šç”¨æˆ·çš„æ›´æ–°

ä½¿ç”¨ cron å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å‡Œæ™¨ 2 ç‚¹çˆ¬å–æŒ‡å®šç”¨æˆ·çš„æ–°å†…å®¹ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼‰
0 2 * * * cd /Users/zhuaoyuan/cursor-workspace/knowledge-base/scripts/zhihu_spider_selenium && ./run.sh all zhang-san >> logs/cron.log 2>&1
```

## å‘½ä»¤é€ŸæŸ¥è¡¨

```bash
# åŸºæœ¬æ“ä½œ
./run.sh login                      # ç™»å½•
./run.sh check                      # æ£€æŸ¥ç™»å½•çŠ¶æ€

# çˆ¬å–è‡ªå·±çš„å†…å®¹
./run.sh article                    # è‡ªå·±çš„æ–‡ç« 
./run.sh answer                     # è‡ªå·±çš„å›ç­”
./run.sh think                      # è‡ªå·±çš„æƒ³æ³•
./run.sh all                        # è‡ªå·±çš„æ‰€æœ‰å†…å®¹

# çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å†…å®¹
./run.sh article zhang-san          # æŒ‡å®šç”¨æˆ·çš„æ–‡ç« 
./run.sh answer zhang-san           # æŒ‡å®šç”¨æˆ·çš„å›ç­”
./run.sh think zhang-san            # æŒ‡å®šç”¨æˆ·çš„æƒ³æ³•
./run.sh all zhang-san              # æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰å†…å®¹

# æŸ¥çœ‹å¸®åŠ©
./run.sh                            # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
python crawler.py --help            # æ˜¾ç¤ºæ‰€æœ‰å‚æ•°
```

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒé€»è¾‘

```python
# 1. ç™»å½•å¹¶è·å– cookie
driver, login_username = login_loadsavecookie(driver)

# 2. åˆ¤æ–­æ˜¯å¦æŒ‡å®šäº†ç›®æ ‡ç”¨æˆ·
if args.target_user:
    username = args.target_user  # ä½¿ç”¨æŒ‡å®šçš„ç”¨æˆ·å
    print(f"å°†çˆ¬å–æŒ‡å®šç”¨æˆ·çš„å†…å®¹: {username}")
else:
    username = login_username     # ä½¿ç”¨ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·å
    print(f"å°†çˆ¬å–ç™»å½•ç”¨æˆ·è‡ªå·±çš„å†…å®¹: {username}")

# 3. æ„é€  URL å¹¶çˆ¬å–
articles_url = f'https://www.zhihu.com/people/{username}/posts'
answers_url = f'https://www.zhihu.com/people/{username}/answers'
thinks_url = f'https://www.zhihu.com/people/{username}/pins'
```

### æ–‡ä»¶ä¿®æ”¹

1. **crawler.py**
   - æ·»åŠ  `--target_user` å‚æ•°
   - åœ¨ä¸»å‡½æ•°ä¸­åˆ¤æ–­å¹¶ä½¿ç”¨æŒ‡å®šçš„ç”¨æˆ·å

2. **run.sh**
   - æ”¯æŒæ¥æ”¶ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºç”¨æˆ·å
   - è‡ªåŠ¨ä¼ é€’ç»™ Python è„šæœ¬

## æ›´æ–°æ—¥å¿—

- **2026-01-13** - æ·»åŠ æŒ‡å®šç”¨æˆ·çˆ¬å–åŠŸèƒ½

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
- `é—®é¢˜å·²è§£å†³.md` - æ•…éšœæ’é™¤
- `README_MACOS.md` - å®Œæ•´ä½¿ç”¨æ‰‹å†Œ
- `QUICKSTART.md` - å¿«é€Ÿå¼€å§‹
